<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClockWise - Learn to Tell Time</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600&family=OpenDyslexic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2D5A7B">
</head>
<body>
    <div id="app" class="app">
        <header class="header">
            <h1 class="logo">ClockWise - Arion's Game</h1>
            <nav class="nav">
                <button id="btn-settings" class="nav-btn" aria-label="Settings">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </button>
                <button id="btn-dashboard" class="nav-btn" aria-label="Progress Dashboard">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3v18h18"></path>
                        <path d="M18 17V9"></path>
                        <path d="M13 17V5"></path>
                        <path d="M8 17v-3"></path>
                    </svg>
                </button>
            </nav>
        </header>

        <main class="main">
            <section id="screen-welcome" class="screen screen-welcome active">
                <div class="welcome-content">
                    <div class="welcome-robux" id="welcome-robux">
                        <img src="images/robux.png" alt="Robux" class="robux-icon" onerror="this.style.display='none'; this.insertAdjacentHTML('afterend', '<span class=\'robux-emoji\'>ðŸ’Ž</span>');">
                        <span class="robux-count" id="welcome-robux-count">0</span>
                        <button id="btn-reset-robux" class="btn-reset-robux" title="Reset Robux">â†º</button>
                    </div>
                    <div class="welcome-clock-icon">
                        <svg viewBox="0 0 100 100" width="120" height="120">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="var(--color-primary)" stroke-width="3"/>
                            <line x1="50" y1="50" x2="50" y2="20" stroke="var(--color-hour)" stroke-width="4" stroke-linecap="round"/>
                            <line x1="50" y1="50" x2="70" y2="50" stroke="var(--color-minute)" stroke-width="3" stroke-linecap="round"/>
                            <circle cx="50" cy="50" r="4" fill="var(--color-primary)"/>
                        </svg>
                    </div>
                    <h2>Welcome to ClockWise</h2>
                    <p class="welcome-subtitle">Learn to tell time through play</p>
                    <div class="welcome-buttons">
                        <button id="btn-start-new" class="btn btn-primary btn-large">Start Learning</button>
                        <button id="btn-continue" class="btn btn-secondary btn-large" style="display:none;">Continue</button>
                    </div>
                    <p class="welcome-info">Designed for children ages 6-14</p>
                </div>
            </section>

            <section id="screen-game" class="screen screen-game">
                <div class="game-header">
                    <button id="btn-home" class="btn btn-back" aria-label="Return to home">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </button>
                    <div class="level-info">
                        <div class="level-nav">
                            <button id="btn-prev-level" class="level-nav-btn" aria-label="Previous level">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 18l-6-6 6-6"/>
                                </svg>
                            </button>
                            <span class="level-badge">Level <span id="current-level">1</span></span>
                            <button id="btn-next-level-nav" class="level-nav-btn" aria-label="Next level">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </button>
                        </div>
                        <span class="level-name" id="level-name">Single Hand Recognition</span>
                    </div>
                    <div class="session-timer" id="session-timer">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                        <span id="session-timer-text">0:00</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                        </div>
                        <span class="progress-text"><span id="questions-done">0</span>/<span id="questions-total">10</span></span>
                    </div>
                    <div class="robux-counter" id="robux-counter">
                        <img src="images/robux.png" alt="Robux" class="robux-icon" onerror="this.style.display='none'; this.insertAdjacentHTML('afterend', '<span class=\'robux-emoji\'>ðŸ’Ž</span>');">
                        <span class="robux-count" id="robux-count">0</span>
                        <button id="btn-reset-robux-game" class="btn-reset-robux" title="Reset Robux">â†º</button>
                        <div class="robux-sparkle"></div>
                    </div>
                    <div class="timer-container" id="timer-container" style="display:none;">
                        <svg class="timer-ring" width="50" height="50">
                            <circle class="timer-ring-bg" cx="25" cy="25" r="22" fill="none" stroke-width="4"/>
                            <circle class="timer-ring-progress" id="timer-ring-progress" cx="25" cy="25" r="22" fill="none" stroke-width="4"/>
                        </svg>
                        <span class="timer-text" id="timer-text">20</span>
                    </div>
                </div>

                <div class="game-content">
                    <div class="clock-container">
                        <div class="hand-legend" id="hand-legend"></div>
                        <div class="clock-wrapper" id="clock-wrapper">
                            <svg id="clock-svg" viewBox="0 0 300 300" class="clock-svg"></svg>
                        </div>
                        <div class="time-display-container" id="time-display-container" style="display:none;">
                            <div class="time-display-12" id="time-display-12">
                                <span class="time-label">12-hour:</span>
                                <span class="time-value" id="time-value-12">--:--</span>
                            </div>
                            <div class="time-display-24" id="time-display-24">
                                <span class="time-label">24-hour:</span>
                                <span class="time-value" id="time-value-24">--:--</span>
                            </div>
                        </div>
                    </div>

                    <div class="prompt-container">
                        <p class="prompt-text" id="prompt-text">What time is this?</p>
                        <p class="reminder-text" id="reminder-text" style="display:none;">Remember: When the hour hand is between two numbers, use the smaller number.</p>
                        <p class="hint-text" id="hint-text" style="display:none;"></p>
                    </div>

                    <div class="answer-container" id="answer-container">
                        <div id="input-text" class="input-mode input-text">
                            <div class="time-input-group">
                                <input type="number" id="input-hour" class="time-input" min="1" max="12" placeholder="HH" aria-label="Hour">
                                <span class="time-separator">:</span>
                                <input type="number" id="input-minute" class="time-input" min="0" max="59" placeholder="MM" aria-label="Minutes">
                            </div>
                            <button id="btn-submit-text" class="btn btn-primary">Check Answer</button>
                        </div>

                        <div id="input-visual" class="input-mode input-visual" style="display:none;">
                            <div class="visual-selector">
                                <div class="hour-selector">
                                    <label>Hour:</label>
                                    <div class="selector-buttons" id="hour-buttons"></div>
                                </div>
                                <div class="minute-selector">
                                    <label>Minutes:</label>
                                    <div class="selector-buttons" id="minute-buttons"></div>
                                </div>
                            </div>
                            <button id="btn-submit-visual" class="btn btn-primary">Check Answer</button>
                        </div>

                        <div id="input-multiple" class="input-mode input-multiple" style="display:none;">
                            <div class="multiple-choice-grid" id="multiple-choice-grid"></div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="btn-hint" class="btn btn-hint">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            Need a hint?
                        </button>
                        <button id="btn-show-numbers" class="btn btn-hint">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                            Show Numbers
                        </button>
                    </div>
                </div>

                <div class="feedback-overlay" id="feedback-overlay">
                    <div class="feedback-content" id="feedback-content">
                        <div class="feedback-icon" id="feedback-icon"></div>
                        <p class="feedback-message" id="feedback-message"></p>
                        <p class="feedback-explanation" id="feedback-explanation"></p>
                        <button id="btn-next" class="btn btn-primary">Next</button>
                    </div>
                </div>
            </section>

            <section id="screen-level-complete" class="screen screen-level-complete">
                <div class="level-complete-content">
                    <div class="celebration-icon">
                        <svg viewBox="0 0 100 100" width="100" height="100">
                            <circle cx="50" cy="50" r="45" fill="var(--color-success)" opacity="0.2"/>
                            <path d="M30 50 L45 65 L70 35" fill="none" stroke="var(--color-success)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h2>Level Complete!</h2>
                    <div class="level-stats">
                        <div class="stat">
                            <span class="stat-value" id="stat-accuracy">85%</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="stat-time">2:30</span>
                            <span class="stat-label">Time</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="stat-streak">5</span>
                            <span class="stat-label">Best Streak</span>
                        </div>
                    </div>
                    <div class="mediated-prompt" id="mediated-prompt">
                        <p class="mediated-text" id="mediated-text"></p>
                    </div>
                    <div class="level-complete-buttons">
                        <button id="btn-next-level" class="btn btn-primary btn-large">Continue to Next Level</button>
                        <button id="btn-repeat-level" class="btn btn-secondary">Practice Again</button>
                    </div>
                </div>
            </section>

            <section id="screen-dashboard" class="screen screen-dashboard">
                <div class="dashboard-header">
                    <button id="btn-back-dashboard" class="btn btn-back">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h2>Progress Dashboard</h2>
                </div>
                <div class="dashboard-content">
                    <div class="dashboard-overview">
                        <div class="overview-card">
                            <h3>Current Level</h3>
                            <span class="overview-value" id="dash-level">1</span>
                        </div>
                        <div class="overview-card">
                            <h3>Overall Accuracy</h3>
                            <span class="overview-value" id="dash-accuracy">0%</span>
                        </div>
                        <div class="overview-card">
                            <h3>Total Time</h3>
                            <span class="overview-value" id="dash-time">0:00</span>
                        </div>
                        <div class="overview-card">
                            <h3>Sessions</h3>
                            <span class="overview-value" id="dash-sessions">0</span>
                        </div>
                    </div>
                    <div class="dashboard-charts">
                        <div class="chart-card">
                            <h3>Accuracy by Level</h3>
                            <div class="chart-container" id="chart-accuracy"></div>
                        </div>
                        <div class="chart-card">
                            <h3>Response Time Trend</h3>
                            <div class="chart-container" id="chart-response"></div>
                        </div>
                    </div>
                    <div class="dashboard-details">
                        <div class="detail-card">
                            <h3>Areas for Practice</h3>
                            <ul class="practice-areas" id="practice-areas"></ul>
                        </div>
                        <div class="detail-card">
                            <h3>Recent Sessions</h3>
                            <ul class="session-history" id="session-history"></ul>
                        </div>
                    </div>
                    <div class="dashboard-actions">
                        <button id="btn-export-data" class="btn btn-secondary">Export Progress (JSON)</button>
                        <button id="btn-reset-progress" class="btn btn-danger">Reset All Progress</button>
                    </div>
                </div>
            </section>

            <section id="screen-settings" class="screen screen-settings">
                <div class="settings-header">
                    <button id="btn-back-settings" class="btn btn-back">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h2>Settings</h2>
                </div>
                <div class="settings-content">
                    <div class="settings-group">
                        <h3>Accessibility</h3>
                        <div class="setting-item">
                            <label for="setting-font">Font Style</label>
                            <select id="setting-font" class="setting-select">
                                <option value="lexend">Lexend (Default)</option>
                                <option value="opendyslexic">OpenDyslexic</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="setting-font-size">Text Size</label>
                            <select id="setting-font-size" class="setting-select">
                                <option value="normal">Normal</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="setting-contrast">High Contrast Mode</label>
                            <input type="checkbox" id="setting-contrast" class="setting-toggle">
                        </div>
                        <div class="setting-item">
                            <label for="setting-clock-size">Clock Size</label>
                            <select id="setting-clock-size" class="setting-select">
                                <option value="normal">Normal (300px)</option>
                                <option value="large">Large (400px)</option>
                                <option value="xlarge">Extra Large (500px)</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>Input Method</h3>
                        <div class="setting-item">
                            <label for="setting-input">Preferred Input</label>
                            <select id="setting-input" class="setting-select">
                                <option value="text">Type Time (HH:MM)</option>
                                <option value="visual">Visual Selection</option>
                                <option value="multiple">Multiple Choice</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>Game Options</h3>
                        <div class="setting-item">
                            <label for="setting-audio">Audio Instructions</label>
                            <input type="checkbox" id="setting-audio" class="setting-toggle">
                        </div>
                        <div class="setting-item">
                            <label for="setting-timer">Show Timer</label>
                            <input type="checkbox" id="setting-timer" class="setting-toggle" checked>
                        </div>
                        <div class="setting-item">
                            <label for="setting-numbers">Always Show Clock Numbers</label>
                            <input type="checkbox" id="setting-numbers" class="setting-toggle">
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>Theme</h3>
                        <div class="theme-options">
                            <button class="theme-btn theme-ocean active" data-theme="ocean" aria-label="Ocean theme"></button>
                            <button class="theme-btn theme-forest" data-theme="forest" aria-label="Forest theme"></button>
                            <button class="theme-btn theme-sunset" data-theme="sunset" aria-label="Sunset theme"></button>
                            <button class="theme-btn theme-lavender" data-theme="lavender" aria-label="Lavender theme"></button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="screen-break" class="screen screen-break">
                <div class="break-content">
                    <div class="break-icon">
                        <svg viewBox="0 0 100 100" width="80" height="80">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="var(--color-primary)" stroke-width="2"/>
                            <path d="M50 25 L50 55 L70 55" fill="none" stroke="var(--color-primary)" stroke-width="4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>Time for a Break!</h2>
                    <p>You've been practicing for 15 minutes. Taking breaks helps your brain learn better!</p>
                    <p class="break-suggestion">Try stretching, getting a drink, or looking at something far away for a minute.</p>
                    <div class="break-buttons">
                        <button id="btn-continue-break" class="btn btn-primary btn-large">I'm Ready to Continue</button>
                        <button id="btn-end-session" class="btn btn-secondary">End Session</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/clock.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/adaptive.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/meme.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

